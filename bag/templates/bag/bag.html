{% extends "base.html" %}

{% block title %}Your Bag | Le Frat{% endblock %}

{% block content %}
<div class="container py-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="m-0">Your Bag</h1>

    <a href="{% url 'checkout' %}" class="btn btn-primary">
      Go to Checkout
    </a>
  </div>

  {% if bag_items %}
    <ul class="list-unstyled">
      {% for item in bag_items %}
        <li class="mb-3">
          <strong>{{ item.product.name }}</strong> â€” ${{ item.product.price }}

          <form method="POST" action="{% url 'update_bag' item.product.id %}" class="mt-2 d-flex gap-2 align-items-center">
            {% csrf_token %}
            <input
              type="number"
              name="quantity"
              value="{{ item.quantity }}"
              min="1"
              class="form-control"
              style="max-width: 120px;"
            >
            <button type="submit" class="btn btn-outline-primary">Update</button>
          </form>

          <form method="POST" action="{% url 'remove_from_bag' item.product.id %}" class="mt-2">
            {% csrf_token %}
            <button type="submit" class="btn btn-outline-danger">Remove</button>
          </form>
        </li>
      {% endfor %}
    </ul>

    <a href="{% url 'products' %}">Continue shopping</a>

  {% else %}
    <p>Your bag is empty.</p>
    <a href="{% url 'products' %}" class="btn btn-primary">Go Shopping</a>
  {% endif %}

</div>
{% endblock %}
